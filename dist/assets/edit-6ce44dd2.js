import{u as q,D as R,_ as H}from"./DeviceManagement-ea782c19.js";import{d as M,j as K,k as d,l as I,w as P,o as C,c as z,b as e,p as X,e as t,f as s,m as O,K as J,u as Q,aN as W,v as Y,A as b,F as Z,E as ee,G as le,H as se,q as te,s as ae,C as ne,g as oe}from"./index-5ea1be58.js";import{_ as ie}from"./VNotifyList.vue_vue_type_script_setup_true_lang-ab9ab3e0.js";import{_ as ue}from"./VBreadcrumb.vue_vue_type_script_setup_true_lang-2a36846f.js";import{b as L}from"./route-block-83d24a4e.js";const de={class:"relative flex h-full flex-1"},ce=["disabled","readonly","minlength","maxlength","title","placeholder"],re=M({__name:"VTextArea",props:{model:null,size:{default:"medium"},inputClass:null,disabled:{type:Boolean},readOnly:{type:Boolean},minLength:null,maxLength:null,tooltip:null,placeholder:null,draggable:{type:Boolean}},emits:["update:model"],setup(o,{emit:x}){const k=o,{size:a,inputClass:r,model:_,draggable:y}=K(k),n=d(),f=d(!1),v=I(()=>{const i=[];switch(a.value){case"medium":i.push("h-24");break;case"large":i.push("h-32");break;default:i.push("h-16");break}return r!=null&&r.value&&i.push(r==null?void 0:r.value),i.join(" ")}),S=I(()=>y.value?"":"resize-none");P(()=>{n.value&&(_!=null&&_.value?(f.value=!0,n.value.value=_.value.toString()):(f.value=!1,n.value.value=""))});function m(i){const w=i.target;w.value?(f.value=!0,x("update:model",w.value)):(f.value=!1,x("update:model",void 0))}function $(){var i;n.value&&(n.value.value="",x("update:model",void 0)),f.value=!1,(i=n.value)==null||i.focus()}return(i,w)=>{const h=J;return C(),z("div",de,[e("textarea",{ref_key:"inputRef",ref:n,class:X(["disabled readonly focus z-10 w-full border border-slate-300 bg-white px-3 pr-7 placeholder-slate-400",[t(v),t(S)]]),disabled:o.disabled,readonly:o.readOnly,minlength:o.minLength,maxlength:o.maxLength,title:o.tooltip,placeholder:o.placeholder,onInput:m},null,42,ce),t(f)&&!o.disabled&&!o.readOnly?(C(),z("div",{key:0,class:"absolute inset-y-0 right-3 z-20 flex items-center pr-1",onClick:$},[s(h,{icon:"fa-times","icon-class":"opacity-60"})])):O("",!0)])}}}),c=o=>(te("data-v-c2279fe9"),o=o(),ae(),o),fe={class:"m-4 bg-white px-4"},ve={class:"flex h-1 flex-1 flex-col gap-1 px-8 [&>div>span]:w-44"},me={class:"col-item"},pe=c(()=>e("span",null,[ne("シリアル番号 "),e("span",{class:"text-red-600"},"*")],-1)),_e={class:"col-item"},he=c(()=>e("span",null,"説明",-1)),be={class:"col-item"},ge=c(()=>e("span",null,null,-1)),xe=c(()=>e("span",null,"確認メッセージ",-1)),ye=c(()=>e("span",null,"初期セットアップを実行しますか?",-1)),Se={class:"mb-5 flex justify-between gap-10"},we={class:"col-item"},Ee=c(()=>e("span",null,"BOXシリアル番号",-1)),ke={class:"col-item"},Ie=c(()=>e("span",null,"セットアップ完了日時",-1)),Ce={class:"col-item"},$e=c(()=>e("span",null,"車両情報",-1)),ze={class:"col-item !items-start"},Ne=c(()=>e("span",null,"ステータス",-1)),Ve={class:"col-item justify-center"},Be=c(()=>e("span",null,"確認メッセージ",-1)),Re=c(()=>e("span",null,"初期セットアップを実行しますか?",-1)),Le={class:"mb-5 flex justify-between gap-10"},j=M({__name:"edit",setup(o){const x=Q(),k=q(),a=d(new R),r=d(!1),_=d(!1),y=d(!1),n=d(!1),f=d(!1),v=d(!1),S=d(!1),m=d([]),$=I(()=>y.value?"応答をお待ちください。":"初期セットアップ"),i=I(()=>S.value?"border-red-600":"");W(()=>{a.value.serialNo=x.currentRoute.value.params.diviceId});async function w(){h("isEdit"),n.value=!await k.saveSetup(),n.value?(n.value=!1,v.value=!1):(v.value=!0,n.value=!0,m.value.includes("ERROR_MESSAGE_001")||m.value.push("ERROR_MESSAGE_001"))}function h(u){u==="isEdit"?r.value=!1:_.value=!1}function N(u){m.value=[],u==="isEdit"?r.value=!0:a.value.serialNo?(S.value=!1,v.value=!1,_.value=!0):(S.value=!0,v.value=!0,m.value.includes("シリアル番号を入力してください。")||m.value.push("シリアル番号を入力してください。"))}async function A(){y.value=!0;const u=await k.getInitSetup(a.value.serialNo);u?(a.value=u,f.value=!0,n.value=!0,v.value=!1):(v.value=!0,m.value.push("データがありません")),h("isInitSetup"),y.value=!1}function V(u,l){a.value.serialNo!==u&&l==="serialNo"&&(a.value=new R),a.value[l]!==u&&f.value?n.value=!0:n.value=!1,a.value[l]=u}function D(){x.push("/device-managements")}return(u,l)=>{const T=ue,G=ee,F=ie,E=le,U=re,g=se,B=H;return C(),z(Z,null,[s(T,{items:[{title:"車載器編集"}]}),e("div",fe,[s(G,{title:"車載器編集"})]),e("div",ve,[t(v)?(C(),Y(F,{key:0,data:t(m)},null,8,["data"])):O("",!0),e("div",me,[pe,s(E,{model:t(a).serialNo,"input-class":t(i),"onUpdate:model":l[0]||(l[0]=p=>V(p,"serialNo"))},null,8,["model","input-class"])]),e("div",_e,[he,s(U,{size:"small",model:t(a).description,"onUpdate:model":l[1]||(l[1]=p=>V(p,"description"))},null,8,["model"])]),e("div",be,[ge,s(B,{"is-open":t(_),onClose:l[4]||(l[4]=p=>h("isInitSetup"))},{"button-open":b(()=>[s(g,{size:"large",disabled:t(y),"input-class":"w-[212px]",label:t($),onClick:l[2]||(l[2]=p=>N("isInitSetup"))},null,8,["disabled","label"])]),title:b(()=>[xe]),detail:b(()=>[ye]),action:b(()=>[e("div",Se,[s(g,{size:"large",class:"w-20",label:"いいえ",onClick:l[3]||(l[3]=p=>h("isInitSetup"))}),s(g,{size:"large",class:"w-20",label:"はい",onClick:A})])]),_:1},8,["is-open"])]),e("div",we,[Ee,s(E,{disabled:!0,model:t(a).boxSerialNo},null,8,["model"])]),e("div",ke,[Ie,s(E,{disabled:!0,model:t(a).setupEndDt},null,8,["model"])]),e("div",Ce,[$e,s(E,{disabled:!0,model:t(a).vehicleInformation},null,8,["model"])]),e("div",ze,[Ne,s(E,{disabled:!0,model:t(a).status},null,8,["model"])]),e("div",Ve,[s(g,{size:"medium",class:"w-20",label:"戻る",onClick:D}),s(B,{"is-open":t(r),onClose:l[7]||(l[7]=p=>h("isEdit"))},{"button-open":b(()=>[s(g,{size:"medium",class:"w-20",disabled:!t(n),label:"編集",onClick:l[5]||(l[5]=p=>N("isEdit"))},null,8,["disabled"])]),title:b(()=>[Be]),detail:b(()=>[Re]),action:b(()=>[e("div",Le,[s(g,{size:"large",class:"w-20",label:"いいえ",onClick:l[6]||(l[6]=p=>h("isEdit"))}),s(g,{size:"large",class:"w-20",label:"はい",onClick:w})])]),_:1},8,["is-open"])])])],64)}}});typeof L=="function"&&L(j);const Te=oe(j,[["__scopeId","data-v-c2279fe9"]]);export{Te as default};
