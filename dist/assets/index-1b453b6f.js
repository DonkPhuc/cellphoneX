import{d as M,j as R,k as _,l as j,w as Se,o as v,c as h,b as e,e as s,m as Q,F as T,n as ne,p as le,t as L,q as we,s as Ce,g as oe,v as z,x as De,y as Ie,z as J,f as n,A as D,B as _e,C as fe,D as pe,E as ee,G as me,H as Y,I as Ne,u as Ve,J as K,K as Le,L as ge,M as he,N as Oe,O as Ee}from"./index-5ea1be58.js";import{u as te,_ as ie}from"./DeviceManagement-ea782c19.js";import{_ as xe}from"./VNotifyList.vue_vue_type_script_setup_true_lang-ab9ab3e0.js";import{_ as Pe}from"./VBreadcrumb.vue_vue_type_script_setup_true_lang-2a36846f.js";import{e as Be}from"./ConvertFile-087940cd.js";import{b as ce}from"./route-block-83d24a4e.js";const be=l=>(we("data-v-4d906688"),l=l(),Ce(),l),Fe={class:"flex items-end justify-end"},Te={class:"list-style-none flex items-center gap-1 [&_>li]:cursor-pointer"},je=be(()=>e("a",{class:"item"},[e("span",{"aria-hidden":"true"},"«")],-1)),Me=[je],Ae=["onClick"],Ue=be(()=>e("a",{class:"item"},[e("span",{"aria-hidden":"true"},"»")],-1)),Re=[Ue],Qe=M({__name:"VDevicePagination",props:{currentPage:null,totalPage:null},emits:["firstPage","lastPage","goPage"],setup(l,{emit:i}){const a=l,{currentPage:t,totalPage:d}=R(a),o=_(1),r=j(()=>t.value===1?1:t.value===d.value&&t.value>4?d.value-4:t.value>2?t.value-2:1),p=j(()=>{const f=[];for(let y=r.value;y<=Math.min(r.value+4,d.value);y++)f.push(y);return f}),m=j(()=>f=>{let y=["px-3 py-1.5 text-sm"];return Number(t.value)===Number(f)?y.push("bg-primary text-white"):y.push("bg-slate-200 text-neutral-700 hover:bg-primary hover:text-white"),y.join(" ")});Se(()=>{o.value=t.value});function g(){i("firstPage",o.value)}function c(){i("lastPage",o.value)}function u(f){o.value=f,i("goPage",o.value)}return(f,y)=>(v(),h("div",Fe,[e("nav",null,[e("ul",Te,[s(t)>1?(v(),h("li",{key:0,onClick:g},Me)):Q("",!0),(v(!0),h(T,null,ne(s(p),N=>(v(),h("li",{key:N,onClick:V=>u(N)},[e("a",{class:le(s(m)(N))},L(N),3)],8,Ae))),128)),s(t)<s(d)?(v(),h("li",{key:1,onClick:c},Re)):Q("",!0)])])]))}});const ze=oe(Qe,[["__scopeId","data-v-4d906688"]]),qe={class:"flex flex-1 cursor-pointer justify-between border-b-2 [&_.item]:flex [&_.item]:flex-1 [&_.item]:border-r [&_.item]:border-slate-300 [&_.item]:px-4 [&_.item]:py-2"},Xe={class:"item truncate"},Ge={class:"item justify-end truncate"},Ke=M({__name:"VDeviceSettingListItem",props:{data:null},setup(l){const i=l,{data:a}=R(i);return(t,d)=>(v(),h("div",qe,[e("div",Xe,L(s(a).key),1),e("div",Ge,L(s(a).value),1)]))}}),We={class:"overflow-y-auto"},He=M({__name:"VDeviceSettingList",props:{data:null,isActive:null},emits:["getItem"],setup(l,{emit:i}){const a=l,{data:t,isActive:d}=R(a),o=j(()=>p=>d.value===p?"bg-yellow-100":"");function r(p){i("getItem",p)}return(p,m)=>{const g=Ke;return v(),h("div",We,[(v(!0),h(T,null,ne(s(t),(c,u)=>(v(),z(g,{key:c.key,class:le(s(o)(u)),data:c,onClick:f=>r(u)},null,8,["class","data","onClick"]))),128))])}}});var ue;const ye=typeof window<"u",Je=l=>typeof l=="string",Ye=()=>{};ye&&((ue=window==null?void 0:window.navigator)!=null&&ue.userAgent)&&/iP(ad|hone|od)/.test(window.navigator.userAgent);function $e(l){return typeof l=="function"?l():s(l)}function Ze(l){return l}function ke(l){return De()?(Ie(l),!0):!1}function et(l){var i;const a=$e(l);return(i=a==null?void 0:a.$el)!=null?i:a}const tt=ye?window:void 0;function st(...l){let i,a,t,d;if(Je(l[0])||Array.isArray(l[0])?([a,t,d]=l,i=tt):[i,a,t,d]=l,!i)return Ye;Array.isArray(a)||(a=[a]),Array.isArray(t)||(t=[t]);const o=[],r=()=>{o.forEach(c=>c()),o.length=0},p=(c,u,f,y)=>(c.addEventListener(u,f,y),()=>c.removeEventListener(u,f,y)),m=J(()=>[et(i),$e(d)],([c,u])=>{r(),c&&o.push(...a.flatMap(f=>t.map(y=>p(c,f,y,u))))},{immediate:!0,flush:"post"}),g=()=>{m(),r()};return ke(g),g}const se=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},ae="__vueuse_ssr_handlers__";se[ae]=se[ae]||{};se[ae];function at(l,i=[],a={}){const t=_(null),d=_(null),o=_("CONNECTING"),r=_(null),p=_(null),{withCredentials:m=!1}=a,g=()=>{r.value&&(r.value.close(),r.value=null,o.value="CLOSED")},c=new EventSource(l,{withCredentials:m});r.value=c,c.onopen=()=>{o.value="OPEN",p.value=null},c.onerror=u=>{o.value="CLOSED",p.value=u},c.onmessage=u=>{t.value=null,d.value=u.data};for(const u of i)st(c,u,f=>{t.value=u,d.value=f.data||null});return ke(()=>{g()}),{eventSource:r,event:t,data:d,status:o,error:p,close:g}}var re;(function(l){l.UP="UP",l.RIGHT="RIGHT",l.DOWN="DOWN",l.LEFT="LEFT",l.NONE="NONE"})(re||(re={}));var nt=Object.defineProperty,de=Object.getOwnPropertySymbols,lt=Object.prototype.hasOwnProperty,ot=Object.prototype.propertyIsEnumerable,ve=(l,i,a)=>i in l?nt(l,i,{enumerable:!0,configurable:!0,writable:!0,value:a}):l[i]=a,it=(l,i)=>{for(var a in i||(i={}))lt.call(i,a)&&ve(l,a,i[a]);if(de)for(var a of de(i))ot.call(i,a)&&ve(l,a,i[a]);return l};const ct={easeInSine:[.12,0,.39,0],easeOutSine:[.61,1,.88,1],easeInOutSine:[.37,0,.63,1],easeInQuad:[.11,0,.5,0],easeOutQuad:[.5,1,.89,1],easeInOutQuad:[.45,0,.55,1],easeInCubic:[.32,0,.67,0],easeOutCubic:[.33,1,.68,1],easeInOutCubic:[.65,0,.35,1],easeInQuart:[.5,0,.75,0],easeOutQuart:[.25,1,.5,1],easeInOutQuart:[.76,0,.24,1],easeInQuint:[.64,0,.78,0],easeOutQuint:[.22,1,.36,1],easeInOutQuint:[.83,0,.17,1],easeInExpo:[.7,0,.84,0],easeOutExpo:[.16,1,.3,1],easeInOutExpo:[.87,0,.13,1],easeInCirc:[.55,0,1,.45],easeOutCirc:[0,.55,.45,1],easeInOutCirc:[.85,0,.15,1],easeInBack:[.36,0,.66,-.56],easeOutBack:[.34,1.56,.64,1],easeInOutBack:[.68,-.6,.32,1.6]};it({linear:Ze},ct);const ut={key:0,class:"flex flex-1 justify-center"},rt={key:1,class:"flex w-[500px] flex-col gap-4"},dt={class:"flex w-full flex-col border border-slate-300"},vt={class:"flex items-center bg-primary"},_t={class:"flex flex-1 border-r border-slate-300"},ft={class:"flex flex-1 border-r border-slate-300"},pt={class:"flex"},mt={class:"flex flex-1 items-center"},gt={class:"flex flex-1 justify-center"},ht={class:"flex"},xt={class:"flex flex-1 items-center"},bt=e("div",{class:"flex-1"},null,-1),yt={key:2,class:"text-gray-600"},$t=e("span",null,"データがありません",-1),kt=[$t],St={key:0,class:"flex flex-1 justify-around pb-4"},wt=e("span",null,"確認メッセージ",-1),Ct=e("span",null,"車載器に値を送信しますか?",-1),Dt={class:"mb-5 flex justify-between gap-10"},It=M({__name:"VDeviceSetting",props:{data:null,serialNo:null,isLoading:{type:Boolean}},setup(l){const i=l,a=te(),{data:t,serialNo:d,isLoading:o}=R(i),r=_(!1),p=_(!1),m=_(""),g=_(0),c=_(0),u=_(-1),f=_(!1),y=_(!1),N=_(!1),V=_("送信"),{status:C,data:w}=at("https://d2uiwgsd1hvqb9.cloudfront.net/apivehicle-obe-setting/v2/vehicle-data/catch-event/obe_setting");J(()=>w.value,async()=>{console.log(C.value),w.value&&C.value==="OPEN"&&(JSON.parse(w.value).statusCode===400?y.value=!0:y.value=!1),w.value=""}),J(()=>r.value,()=>{r.value===!1&&(u.value=-1,m.value="",g.value=0,N.value=!1)});const E=j(()=>{let x={key:"",value:0};return u.value<0?(x.key="",x.value=0):(x.key=t.value[u.value].key,x.value=t.value[u.value].value,f.value=!0),x});function A(x){m.value=x}function $(x){g.value=x}function k(x){u.value=x,m.value=E.value.key,g.value=E.value.value}function I(){c.value=t.value[u.value].value,p.value=!0,t.value[u.value].key=m.value,t.value[u.value].value=g.value}function B(){return{verNo:1,obeSerial:d.value,sensorInterval:Number(t.value[0].value),obeInterval:Number(t.value[1].value),statusCode:400}}async function W(){let x=B();await a.postEditRequest(x),N.value=await!0,p.value=!1,m.value="",g.value=0,f.value=!1,u.value=-1}function S(){p.value=!1,t.value[u.value].value=c.value}async function b(){await a.postSendRequest({serialNo:d.value})}return(x,O)=>{const X=pe,F=xe,U=ee,G=He,H=me,q=Y,Z=ie;return v(),h(T,null,[n(Z,{"is-open":s(r),onClose:O[2]||(O[2]=P=>r.value=P)},{"button-open":D(()=>[e("div",{onClick:O[0]||(O[0]=P=>r.value=!0)},[_e(x.$slots,"button-open")])]),title:D(()=>[fe(" 車載器状態確認 ")]),detail:D(()=>[s(o)?(v(),h("div",ut,[n(X)])):(v(),h(T,{key:1},[s(N)?(v(),h(T,{key:0},[s(y)?(v(),z(F,{key:0,class:"mb-8",type:"success",data:["Update Successfully"]})):(v(),z(F,{key:1,class:"mb-8",type:"danger",data:["Update Failed"]}))],64)):Q("",!0),s(t)&&s(t).length>0?(v(),h("div",rt,[e("div",dt,[e("div",vt,[e("div",_t,[n(U,{class:"flex flex-1 justify-center py-1 text-white",title:"キー "})]),e("div",ft,[n(U,{class:"flex flex-1 justify-center py-1 text-white",title:"値"})])]),n(G,{"is-active":s(u),data:s(t),onGetItem:k},null,8,["is-active","data"])]),e("div",pt,[e("div",mt,[n(U,{class:"w-12",title:"キー"}),n(H,{disabled:!0,model:s(m),class:"flex-1","onUpdate:model":A},null,8,["model"])]),e("div",gt,[n(q,{disabled:!s(f)||!s(g),"input-class":"w-28",label:"変更",onClick:I},null,8,["disabled"])])]),e("div",ht,[e("div",xt,[n(U,{class:"w-12",title:"値"}),n(H,{disabled:!s(f),model:s(g),max:9999,type:"number",class:"flex-1","onUpdate:model":$},null,8,["disabled","model"])]),bt])])):(v(),h("h4",yt,kt))],64))]),action:D(()=>[s(o)?Q("",!0):(v(),h("div",St,[n(q,{label:"戻る",onClick:O[1]||(O[1]=P=>r.value=!1)}),s(t)&&s(t).length>0?(v(),z(q,{key:0,label:s(V),onClick:b},null,8,["label"])):Q("",!0)]))]),_:3},8,["is-open"]),n(Z,{"is-open":s(p),onClose:O[3]||(O[3]=P=>p.value=!1)},{title:D(()=>[wt]),detail:D(()=>[Ct]),action:D(()=>[e("div",Dt,[n(q,{size:"large",class:"w-20",label:"いいえ",onClick:S}),n(q,{size:"large",class:"w-20",label:"はい",onClick:W})])]),_:1},8,["is-open"])],64)}}}),Nt=M({__name:"VNumberLabel",props:{value:null,thousandSeparate:{type:Boolean},decimalLength:{default:2}},setup(l){const i=l,{value:a,thousandSeparate:t,decimalLength:d}=R(i),o=j(()=>{if(a.value===0&&!t.value)return a.value;const r=d.value===0?{style:"decimal"}:{minimumFractionDigits:d.value,maximumFractionDigits:d.value};if(!isNaN(a.value))return t.value?a.value.toLocaleString("en-US",r):a.value.toFixed(d.value)});return(r,p)=>(v(),h("span",null,L(s(o)),1))}}),Vt={key:0,class:"flex flex-col gap-1 p-4 [&_.item]:flex [&_.item]:flex-row [&_.item]:gap-8"},Lt={class:"item"},Ot=e("h4",{class:"w-64"},"取得時間",-1),Et={class:"whitespace-nowrap"},Pt={class:"mt-6 flex gap-20"},Bt={class:"flex flex-col gap-1"},Ft={class:"item"},Tt=e("h4",{class:"w-64"},"車載器異常ステータス",-1),jt={class:"item"},Mt=e("h4",{class:"w-64"},"車載器 バッテリー残量",-1),At={class:"item"},Ut=e("h4",{class:"w-64"},"車載器 ソフトバージョン",-1),Rt={class:"item"},Qt=e("h4",{class:"w-64"},"車載機- Box間セットアップフラグ",-1),zt={class:"item mt-7"},qt=e("h4",{class:"w-64"},"鍵交換フラグ",-1),Xt={class:"flex flex-col gap-1"},Gt={class:"item"},Kt=e("h4",{class:"w-64"},"BOX異常ステータス",-1),Wt={class:"item"},Ht=e("h4",{class:"w-64"},"BOX状態(Lock/Unlock)",-1),Jt={class:"item"},Yt=e("h4",{class:"w-64"},"BOX バッテリー残量",-1),Zt={class:"item"},es=e("h4",{class:"w-64"},"BOX 内部温度",-1),ts={class:"item"},ss=e("h4",{class:"w-64"},"BOX 時刻同期状態",-1),as={key:1,class:"text-gray-600"},ns=e("span",null,"データがありません",-1),ls=[ns],os={class:"pb-8"},is=M({__name:"VDeviceManagementDetail",props:{data:null},setup(l){const i=l,a=_(!1),{data:t}=R(i),d=j(()=>{let o={boxLockStatus:"",boxNtpStatus:"",carBoxSetupFlag:"",boxStatus:"",carStatus:"",secretkeyFlag:""};return t.value.boxLockStatus===1?o.boxLockStatus="LOCK":t.value.boxLockStatus===2&&(o.boxLockStatus="UNLOCK"),t.value.boxNtpStatus===1?o.boxNtpStatus="未設定":t.value.boxNtpStatus===2&&(o.boxNtpStatus="設定"),t.value.boxStatus===1?o.boxStatus="異常":t.value.boxStatus===2&&(o.boxStatus="正常"),t.value.carStatus===1?o.carStatus="異常":o.carStatus="正常",t.value.secretkeyFlag===1?o.secretkeyFlag="TRUE":o.secretkeyFlag="FALSE",t.value.carBoxSetupFlag===1?o.carBoxSetupFlag="TRUE":o.carBoxSetupFlag="FALSE",o});return(o,r)=>{const p=Ne,m=Nt,g=Y,c=ie;return v(),z(c,{"is-open":s(a),onClose:r[2]||(r[2]=u=>a.value=u)},{"button-open":D(()=>[e("div",{onClick:r[0]||(r[0]=u=>a.value=!0)},[_e(o.$slots,"button-open")])]),title:D(()=>[fe(" 車載器状態確認 ")]),detail:D(()=>[s(t)?(v(),h("div",Vt,[e("div",Lt,[Ot,e("span",Et,[n(p,{date:s(t).getTime},null,8,["date"])])]),e("div",Pt,[e("div",Bt,[e("div",Ft,[Tt,e("span",null,L(s(d).carStatus),1)]),e("div",jt,[Mt,n(m,{value:s(t).carBattery,"decimal-length":0},null,8,["value"])]),e("div",At,[Ut,e("span",null,L(s(t).carVersion),1)]),e("div",Rt,[Qt,e("span",null,L(s(d).carBoxSetupFlag),1)]),e("div",zt,[qt,e("span",null,L(s(d).secretkeyFlag),1)])]),e("div",Xt,[e("div",Gt,[Kt,e("span",null,L(s(d).boxStatus),1)]),e("div",Wt,[Ht,e("span",null,L(s(d).boxLockStatus),1)]),e("div",Jt,[Yt,n(m,{value:s(t).boxBattery},null,8,["value"])]),e("div",Zt,[es,n(m,{value:s(t).boxTemp},null,8,["value"])]),e("div",ts,[ss,e("span",null,L(s(d).boxNtpStatus),1)])])])])):(v(),h("h4",as,ls))]),action:D(()=>[e("div",os,[n(g,{label:"閉じる",onClick:r[1]||(r[1]=u=>a.value=!1)})])]),_:3},8,["is-open"])}}}),cs={class:"flex flex-1 justify-between gap-4 border-b-2"},us={class:"flex w-8 items-center justify-center"},rs=["id","checked","value"],ds={class:"item !justify-start"},vs={class:"item"},_s={class:"item"},fs={class:"item"},ps={class:"item"},ms={class:"item"},gs=M({__name:"VDeviceListItem",props:{data:null,dataInfo:null,dataSetting:null,checked:{type:Boolean},id:null},emits:["checkbox","switch","showDetail","setting"],setup(l,{emit:i}){const a=l,{data:t,checked:d,id:o}=R(a),r=_(!1),p=_(!1),m=Ve(),g=j(()=>t.value.status===K.Active?"アクティプ":t.value.status===K.Maintenance?"メンテナンス":"未定");function c(C){const w=C.target;i("checkbox",w.value,w.checked)}function u(C){i("switch",C)}function f(C){i("showDetail",C)}function y(C){i("setting",C),r.value=!0,p.value=!0,setTimeout(()=>{p.value=!1},500)}function N(C){m.push(`device-managements/${C}/edit`)}function V(C){const w=m.resolve(`device-log/${C}`);window.open(w.href)}return(C,w)=>{const E=Y,A=is,$=It;return v(),h("div",cs,[e("div",us,[e("input",{id:s(o),checked:s(d),type:"checkbox",value:s(o),onClick:c},null,8,rs)]),e("div",{class:"item !cursor-pointer !justify-start !underline hover:!text-primary",onClick:w[0]||(w[0]=k=>N(s(t).serialNo))},L(s(t).serialNo),1),e("div",ds,L(s(t).boxSerialNo),1),e("div",vs,L(s(g)),1),e("div",_s,L(s(t).vehicleNumber),1),e("div",fs,[n(E,{label:"切替",onClick:w[1]||(w[1]=k=>u(s(t)))})]),e("div",ps,[n(A,{data:l.dataInfo},{"button-open":D(()=>[n(E,{label:"最新状態",onClick:w[2]||(w[2]=k=>f(s(t).id))})]),_:1},8,["data"])]),e("div",ms,[n($,{"is-loading":s(p),data:l.dataSetting,serialNo:s(t).serialNo},{"button-open":D(()=>[n(E,{label:"設定",onClick:w[3]||(w[3]=k=>y(s(t).id))})]),_:1},8,["is-loading","data","serialNo"])]),e("div",{class:"item",onClick:w[4]||(w[4]=k=>V(s(t).serialNo))},[n(E,{label:"ログ"})])])}}});const hs=oe(gs,[["__scopeId","data-v-3d9d66ef"]]),xs={class:"flex h-1 w-full flex-1 border"},bs={class:"flex w-full flex-col"},ys={key:0,class:"checked"},$s=["checked"],ks={key:1,class:"checked"},Ss={class:"sort"},ws={class:"sort"},Cs={class:"sort"},Ds={class:"sort"},Is={class:"item"},Ns={class:"item"},Vs={class:"item"},Ls={class:"item"},Os={class:"overflow-y-auto"},Es=M({__name:"VDeviceList",props:{data:null},setup(l){const i=l,a=te(),{data:t}=R(i),d=_(),o=_(!1),r=_(-1),p=_(!1),m=_(),g=_(),c=_(),u=j(()=>t.value.length>=10?"pr-4":""),f=j(()=>$=>r.value===$&&!p.value?"fa-angle-up":"fa-angle-down");J(()=>t.value,()=>{t.value.every(k=>k.checked)?(o.value=!0,m.value=!0):(o.value=!1,m.value=!1),t.value.length===0&&(o.value=!1,m.value=!1)},{deep:!0});function y($,k){d.value=t.value.find(I=>I.id===$),d.value.checked=k}function N(){t.value.forEach($=>{$.checked=!0}),o.value=!0,m.value=!0}function V(){t.value.forEach($=>{$.checked=!1}),o.value=!1}function C($,k){r.value===$&&(p.value=!p.value),r.value=$,p.value?t.value.sort((I,B)=>I[k].toString().localeCompare(B[k].toString())):t.value.sort((I,B)=>B[k].toString().localeCompare(I[k].toString()))}function w($){switch($.status){case K.Maintenance:$.status=K.Active;break;case K.Active:$.status=K.Maintenance;break}}async function E($){g.value=await a.getDataManagementInfo($)}async function A($){c.value=await a.getDataManagementSetting($)}return($,k)=>{const I=ee,B=Le,W=hs;return v(),h("div",xs,[e("div",bs,[e("div",{class:le(["flex items-center gap-4 border shadow-lg",s(u)])},[s(o)?(v(),h("div",ys,[e("input",{checked:s(m),type:"checkbox",onChange:V},null,40,$s)])):(v(),h("div",ks,[e("input",{type:"checkbox",onChange:N},null,32)])),e("div",{class:"item",onClick:k[0]||(k[0]=S=>C(0,"serialNo"))},[n(I,{class:"title",title:"シリアル番号"}),e("div",Ss,[n(B,{icon:s(f)(0)},null,8,["icon"])])]),e("div",{class:"item",onClick:k[1]||(k[1]=S=>C(1,"boxSerialNo"))},[n(I,{class:"title",title:"BOXシリアル番号"}),e("div",ws,[n(B,{icon:s(f)(1)},null,8,["icon"])])]),e("div",{class:"item",onClick:k[2]||(k[2]=S=>C(2,"status"))},[n(I,{class:"title",title:"ステータス"}),e("div",Cs,[n(B,{icon:s(f)(2)},null,8,["icon"])])]),e("div",{class:"item",onClick:k[3]||(k[3]=S=>C(3,"vehicleNumber"))},[n(I,{class:"title",title:"車両情報"}),e("div",Ds,[n(B,{icon:s(f)(3)},null,8,["icon"])])]),e("div",Is,[n(I,{title:"モード切替"})]),e("div",Ns,[n(I,{title:"車載器状態確認"})]),e("div",Vs,[n(I,{title:"設定"})]),e("div",Ls,[n(I,{title:"ログ"})])],2),e("div",Os,[(v(!0),h(T,null,ne(s(t),(S,b)=>(v(),h("div",{key:b},[n(W,{id:S.id,"data-setting":s(c),"data-info":s(g),data:S,checked:S.checked,onCheckbox:y,onSwitch:w,onShowDetail:E,onSetting:A},null,8,["id","data-setting","data-info","data","checked"])]))),128))])])])}}});const Ps=oe(Es,[["__scopeId","data-v-f26d8104"]]),Bs={class:"flex flex-col gap-4 lg:px-96"},Fs={class:"flex gap-4 lg:gap-x-20"},Ts={class:"flex flex-1 gap-4"},js={class:"flex-1"},Ms={class:"flex-[2]"},As={class:"flex flex-1 gap-4"},Us={class:"flex-1"},Rs={class:"flex-[2]"},Qs={class:"flex gap-4 lg:gap-x-20"},zs={class:"flex flex-1 gap-4"},qs={class:"flex-1"},Xs={class:"flex-[2]"},Gs={class:"flex flex-1 gap-4"},Ks={class:"flex-1"},Ws={class:"flex-[2]"},Hs={class:"flex justify-end"},Js=M({__name:"VDeviceManagementSearchForm",props:{isLoading:{type:Boolean},isSelected:{type:Boolean}},emits:["search"],setup(l,{emit:i}){const a=l,t=te(),{managementSearchCondition:d}=ge(t),{isLoading:o}=R(a),r=_();he(()=>{r.value=[{label:"すべて",value:0},{label:"アクティプ",value:1},{label:"メンテナンス",value:2}],d.value.status=r.value[0].value});function p(){i("search")}function m(g,c){c==="status"?d.value[c]=Number(g):d.value[c]=g}return(g,c)=>{const u=ee,f=me,y=Oe,N=Y;return v(),h("div",Bs,[e("div",Fs,[e("div",Ts,[e("div",js,[n(u,{title:"シリアル番号"})]),e("div",Ms,[n(f,{"onUpdate:model":c[0]||(c[0]=V=>m(V,"serialNo"))})])]),e("div",As,[e("div",Us,[n(u,{title:"車両番号"})]),e("div",Rs,[n(f,{"onUpdate:model":c[1]||(c[1]=V=>m(V,"vehicleNumber"))})])])]),e("div",Qs,[e("div",zs,[e("div",qs,[n(u,{title:"BOXシリアル番号"})]),e("div",Xs,[n(f,{"onUpdate:model":c[2]||(c[2]=V=>m(V,"boxSerialNo"))})])]),e("div",Gs,[e("div",Ks,[n(u,{title:"ステータス"})]),e("div",Ws,[n(y,{type:"dropdown",options:s(r),model:s(d).status,"onUpdate:model":c[3]||(c[3]=V=>m(V,"status"))},null,8,["options","model"])])])]),e("div",Hs,[n(N,{disabled:s(o),label:"検索",onClick:p},null,8,["disabled"])])])}}}),Ys={class:"flex h-full flex-col gap-4 px-4"},Zs={class:"flex flex-col gap-4"},ea={class:"flex flex-wrap gap-4"},ta={class:"flex flex-1"},sa={class:"flex gap-4"},aa=e("span",null,"確認メッセージ",-1),na=e("span",null,"Export? 初期セットアップを実行しますか?",-1),la={class:"mb-5 flex justify-between gap-10"},oa=e("span",null,"確認メッセージ",-1),ia=e("span",null,"Delete? 初期セットアップを実行しますか?",-1),ca={class:"mb-5 flex justify-between gap-10"},ua={key:0,class:"flex flex-1 justify-center pb-32"},ra=e("div",{class:"flex w-full justify-center bg-gray-200 px-4 py-2 text-sm font-medium"},[e("h4",{class:"text-gray-600"},[e("span",null,"データがありません")])],-1),da=e("span",{class:"py-8"},null,-1),va=M({__name:"index",setup(l){const i=te(),{managementData:a,managementSearchCondition:t}=ge(i),d=_([]),o=_([]),r=_(!0),p=_(!1),m=_(!1),g=_(!1),c=_(!1),u=_(!1),f=_(0),y=_(!1),N=_(["Delete Succeeded"]),V=_(["Delete failed"]);he(()=>{a.value=[],r.value=!0}),Ee(()=>{a.value=[]}),J(()=>a.value,()=>{d.value=a.value.filter(S=>S.checked===!0),d.value.length!==0?m.value=!0:m.value=!1},{deep:!0});function C(){const{serialNo:S,vehicleNumber:b,boxSerialNo:x,status:O,page:X}=t.value,F=S==null?void 0:S.trim(),U=b==null?void 0:b.trim(),G=x==null?void 0:x.trim();return{...S!==void 0&&{serialNo:F},...b!==void 0&&{vehicleNumber:U},...x!==void 0&&{boxSerialNo:G},...O!==void 0&&O>0&&{status:O},...X&&{page:X}}}async function w(){t.value.page=1,A()}async function E(){A()}async function A(){C(),r.value=!1,p.value=!0,a.value=[],f.value=await i.getInitData(),p.value=!1}async function $(){y.value=!0;const S=[];if(a.value&&a.value.length!==0)for(let x=a.value.length-1;x>=0;x--)a.value[x].checked&&S.push(a.value[x].id);await i.postDeleteRequest(S)?(g.value=!1,A()):g.value=!0,c.value=!1,setTimeout(()=>{y.value=!1},3e3)}async function k(){o.value=await i.getDataManagementExport(),Be(o.value,"Management")}function I(S){t.value.page=S,t.value.page>1&&(t.value.page=1),E()}function B(S){t.value.page=S,t.value.page<f.value&&(t.value.page=f.value),E()}function W(S){t.value.page=S,(t.value.page<=f.value||isNaN(t.value.page))&&(t.value.page<=0||isNaN(t.value.page))&&(t.value.page=1),E()}return(S,b)=>{const x=Pe,O=ee,X=Js,F=Y,U=xe,G=ie,H=pe,q=Ps,Z=ze;return v(),h("div",Ys,[n(x,{items:[{title:"車載器管理"}]}),n(O,{title:"車載器管理"}),n(X,{"is-selected":s(m),"is-loading":s(p),onSearch:w,onDelete:b[0]||(b[0]=P=>c.value=!0),onExport:b[1]||(b[1]=P=>u.value=!0)},null,8,["is-selected","is-loading"]),e("div",Zs,[e("div",ea,[e("div",ta,[n(F,{class:"w-48",label:"エクスポート",onClick:b[2]||(b[2]=P=>u.value=!0)})]),s(y)?(v(),h(T,{key:0},[s(g)?(v(),z(U,{key:1,data:s(V),type:"danger"},null,8,["data"])):(v(),z(U,{key:0,data:s(N),type:"success"},null,8,["data"]))],64)):Q("",!0),e("div",sa,[n(F,{label:"削除",disabled:!s(m),onClick:b[3]||(b[3]=P=>c.value=!0)},null,8,["disabled"])])])]),n(G,{"is-open":s(u),onClose:b[6]||(b[6]=P=>u.value=!1)},{title:D(()=>[aa]),detail:D(()=>[na]),action:D(()=>[e("div",la,[n(F,{size:"large",class:"w-20",label:"いいえ",onClick:b[4]||(b[4]=P=>u.value=!1)}),n(F,{size:"large",class:"w-20",label:"はい",onClick:b[5]||(b[5]=P=>k())})])]),_:1},8,["is-open"]),n(G,{"is-open":s(c),onClose:b[8]||(b[8]=P=>c.value=!1)},{title:D(()=>[oa]),detail:D(()=>[ia]),action:D(()=>[e("div",ca,[n(F,{size:"large",class:"w-20",label:"いいえ",onClick:b[7]||(b[7]=P=>c.value=!1)}),n(F,{size:"large",class:"w-20",label:"はい",onClick:$})])]),_:1},8,["is-open"]),s(r)?Q("",!0):(v(),h(T,{key:0},[s(p)?(v(),h("div",ua,[n(H)])):(v(),h(T,{key:1},[s(a).length!==0?(v(),h(T,{key:0},[n(q,{data:s(a)},null,8,["data"]),s(f)>1?(v(),z(Z,{key:0,"current-page":s(t).page,"total-page":s(f),onGoPage:W,onLastPage:B,onFirstPage:I},null,8,["current-page","total-page"])):Q("",!0)],64)):(v(),h(T,{key:1},[ra,da],64))],64))],64))])}}});typeof ce=="function"&&ce(va);export{va as default};
